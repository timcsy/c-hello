# 摩斯密碼練習網站 - 功能規格

**版本**: 0.1.0 | **日期**: 2025-10-29 | **狀態**: 初稿

## 專案概述

摩斯密碼練習網站是一個互動式學習工具，允許使用者通過電腦鍵盤或手機觸控屏幕練習摩斯密碼。網站提供實時音頻反饋、可調整的時間參數，以及完整的靜態部署能力，可自動上傳至 GitHub Pages。

## 功能需求

### 核心功能

#### FR-1: 摩斯密碼輸入介面
使用者可通過以下兩種方式練習摩斯密碼：
- **電腦鍵盤**：按住單一指定按鍵產生「點」(dit, ·) 和「劃」(dah, −)
  - 短按 ≤ 設定時間產生「點」
  - 長按 > 設定時間產生「劃」
  - 鬆開按鍵超過「字元間隔」時間後自動終止當前字元
  
- **手機觸控**：在螢幕觸控區域按住產生訊號
  - 邏輯同鍵盤輸入
  - 多點觸控環境下：記錄首個觸控點 ID，忽略其他同時觸控；鬆開首個點時重置

#### FR-2: 實時音頻反饋
- 每次「點」或「劃」輸入時播放對應音頻
  - 「點」：短嗶音 (600Hz, 100ms)
  - 「劃」：長嗶音 (600Hz, 300ms)
- 音量可調整 (0-100%)
- 可切換靜音模式

#### FR-3: 時間參數調整
使用者可調整以下參數（都可動態改變，即時生效）：
- **Dit 時長**：「點」音訊長度 (預設: 100ms, 範圍: 50-200ms)
- **Dah 時長**：「劃」音訊長度 (預設: 300ms, 範圍: 150-500ms)
- **字元間隔**：字元之間的空隙時長 (預設: 300ms, 範圍: 100-500ms)
- **字組間隔**：字組之間的空隙時長 (預設: 700ms, 範圍: 300-1000ms)

#### FR-4: 摩斯密碼解碼與顯示
- 實時顯示使用者輸入的摩斯密碼序列（符號視圖：· − · −）
- 自動解碼為對應字母、數字或符號（若可能）
- 顯示已輸入的完整消息

#### FR-5: 練習模式
- **自由練習**：使用者任意輸入摩斯密碼
- **挑戰模式**：系統隨機提示待練習字母，使用者輸入相應摩斯密碼
- 實時驗證使用者輸入是否正確
- **模式切換**：頁面上方標籤 (Tab switch) 可快速切換「自由練習」與「挑戰模式」

#### FR-6: 統計與回饋
- 顯示本次練習的統計數據：
  - 輸入字元數
  - 正確字元數（若為驗證模式）
  - 準確率（若為驗證模式）
  - 練習時長

#### FR-7: GitHub Pages 自動部署
- Build 流程自動生成靜態檔案 (HTML、CSS、JavaScript)
- 所有資源使用相對路徑
- 無後端依賴，純客戶端實現
- 支援通過 GitHub Actions 自動部署至 GitHub Pages

## 非功能需求

### NFR-1: 跨平台相容性
- 支援主流桌面瀏覽器 (Chrome, Firefox, Safari, Edge)
- 支援主流行動瀏覽器 (Chrome Mobile, Safari iOS, Samsung Internet)
- 響應式設計適配各類螢幕尺寸

### NFR-2: 效能
- 初始加載時間 < 2 秒
- 音頻播放延遲 < 50ms
- 解碼速度即時 (< 10ms)
- 記憶體使用 < 50MB

### NFR-3: 無障礙
- 符合 WCAG 2.1 AA 標準
- 鍵盤導航完全支援
- 螢幕閱讀器友善

### NFR-4: 本地化
- 中文介面（繁體中文）
- 國際化準備（未來擴展用）

### NFR-5: 離線能力
- 網站可在無網際網路連線狀態下完全運作

## 使用者故事

### US-1: 基礎摩斯密碼練習
作為想學習摩斯密碼的初學者，我希望能夠用按鍵或觸控的方式輸入摩斯密碼，並聽到相應的聲音反饋，以便熟悉點和劃的節奏。

**驗收標準**：
- [ ] 按住鍵盤按鍵能產生摩斯訊號
- [ ] 短按與長按能區分「點」與「劃」
- [ ] 每次按鍵都有音頻回饋
- [ ] 手機觸控同樣有效

### US-2: 調整練習速度
作為進階練習者，我希望能調整摩斯密碼的時間參數，以適應不同的練習速度和難度。

**驗收標準**：
- [ ] 使用者能輕易調整所有時間參數
- [ ] 參數變更立即生效
- [ ] 參數值儲存於瀏覽器本地存儲

### US-3: 驗證練習成果
作為希望自我檢驗的練習者，我希望系統能提示待練習的字母，並驗證我的摩斯密碼輸入是否正確。

**驗收標準**：
- [ ] 系統隨機提示字母
- [ ] 使用者輸入摩斯密碼後顯示是否正確
- [ ] 統計正確率與成績

### US-4: 部署至個人網站
作為想分享練習工具的開發者，我希望能輕鬆將此網站部署至 GitHub Pages，供他人使用。

**驗收標準**：
- [ ] Build 過程自動生成可部署的靜態檔案
- [ ] GitHub Actions 工作流自動部署
- [ ] 部署後網站在 GitHub Pages 上完全可用
- [ ] 所有資源連結正確（相對路徑）

## 邊界條件與例外

### BC-1: 摩斯密碼解碼限制
- 僅支援國際摩斯密碼標準 (ITU-T)
- 支援英文字母、數字 (0-9) 和常見標點符號
- 未定義的符號顯示為「?」

### BC-2: 音頻不可用情況
- 若瀏覽器無法播放音頻，自動啟用視覺降級模式
- 視覺降級模式：按鍵時元素變色（點=綠色閃爍、劃=紅色閃爍），配合文字「點」/「劃」顯示
- 使用者可手動切換靜音模式啟用視覺降級

### BC-3: 觸控設備限制
- 多點觸控環境下：記錄首個觸控點 ID，忽略其他同時觸控；鬆開首個點時重置
- 同時多點觸控行為：後續觸控點被忽略，直至首個觸控點釋放

### BC-4: 離線使用
- 網站無需網際網路連線即可運作
- 瀏覽器本地存儲用於保存偏好設定

## 測試計畫

### TP-1: 功能測試
- [ ] 測試各時間參數組合的有效性
- [ ] 驗證摩斯密碼解碼準確性
- [ ] 測試所有支援符號的輸入與解碼
- [ ] 驗證統計數據準確性

### TP-2: 相容性測試
- [ ] 跨瀏覽器測試 (Chrome, Firefox, Safari, Edge)
- [ ] 跨設備測試 (桌面、平板、手機)
- [ ] 響應式設計驗證

### TP-3: 效能測試
- [ ] 測試頁面加載時間
- [ ] 測試音頻播放延遲
- [ ] 測試解碼效能

### TP-4: 部署測試
- [ ] GitHub Actions 工作流執行成功
- [ ] 部署產物完整性驗證
- [ ] GitHub Pages 網站可訪問性驗證
- [ ] 資源連結有效性驗證

## 相關資源

- [國際摩斯密碼標準](https://en.wikipedia.org/wiki/Morse_code)
- [Web Audio API 文檔](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)
- [GitHub Pages 部署指南](https://docs.github.com/en/pages)

## 澄清紀錄

### Session 2025-10-29

- Q: 字元間隔的觸發條件？→ A: 使用者鬆開按鍵超過「字元間隔」設定時間後自動終止字元
- Q: 瀏覽器不支援 Web Audio API 時的降級方案？→ A: 按鍵時元素變色（點=綠色閃爍、劃=紅色閃爍），配合文字「點」/「劃」顯示
- Q: 打包工具選擇？→ A: Vite
- Q: 練習模式切換機制？→ A: 上方標籤選擇 (Tab switch)
- Q: 多點觸控處理？→ A: 記錄首個觸控點 ID，忽略其他同時觸控；鬆開首個點時重置
